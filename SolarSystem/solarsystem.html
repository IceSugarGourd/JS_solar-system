<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>SS</title>
<style>

	/*初始化页面代码初始化*/
	body,h1,h2,h3,h4,h5,h6,p,dl,dd,ul,ol,form,input,textarea,th,td,select{ margin:0; padding:0;}
	em{ font-style:normal;}
	li{ list-style:none;}
	a{ text-decoration:none;}
	img{ border:none; vertical-align:top;}
	table{ border-collapse:collapse;}
	input,textarea{ outline:none;}
	textarea{ resize:none; overflow:auto;}
	body{ font:12px "微软雅黑";}

	body {
    background: #1E1E1E;
	}

	#Line{

		position:absolute;
		top: 15%;
		left:10%;
		width: 80%;
		height: 70%;
		border-radius: 50%/50%;
		border: 1px solid gray;
		z-index: 0;
 
	}

	#earth{

		width: 30px;
		height: 30px;
		left: 9%;
		border-radius: 15px;
		background: blue;
		position: absolute;
		top: 49%;	

	}
</style>

				
	<script type="text/javascript">


	window.onload = function(){

		var oEar = document.getElementById('earth');
		var oEar_L = document.getElementById('Line');
		var timer = null;
		var speed = 5;
		var heading = true;
		var x0 = 0;
		var x1 = 0;
		var a = 0;
		var b = 0;
		var y = 0;  // 0 为 NAN ??
		var yn = 0;
		var xn = 0;
		var h = 0;
		var k = 0;
		//alert(document.documentElement.clientWidth); 
		//alert(document.documentElement.clientHeight);

		/*初始化各种浏览器每个星球所在位置*/
		function init(){
				//oEar.style.left = parseInt(speed) +'px';
			 x0 = parseInt(document.documentElement.clientWidth * 0.09);
			 x1 = parseInt(document.documentElement.clientWidth * 0.89);   // BUG  1 之前用了 var 导致x0 x1 为局部变量 这样值就赋不到 mive()里  注意写法！！ 
			  y = parseInt(document.documentElement.clientHeight * 0.5);
			  yn = y;
			  a = parseInt((x1-x0)/2);									 	//a 为长轴	
			  b = parseInt(document.documentElement.clientHeight * 0.35);	//b 为短轴
			  h = x0 + a;
			  k = parseInt(document.documentElement.clientHeight * 0.5);	// h,k 为椭圆中心点的坐标
			  //alert(x0);
			  //alert(x1);
			  //alert(a);
			  //alert(b);
			  //alert(h);
			  //alert(a/b);
			  //alert(y);
			  //alert(x1);
			  //alert(parseInt(document.documentElement.clientHeight * 0.15 + document.documentElement.clientHeight*0.35));
			speed = x0;

		}


		/*运动函数*/
		function move(){

			oEar.style.left = parseInt(speed) +'px';
			speed = heading ? ++speed : --speed;

			yn = b * Math.sqrt(1 - (Math.pow(Math.abs(speed - h),2) / Math.pow(a,2) )  )  + k;

			//y=Math.sqrt(1-Math.pow(xn/a,2))*100;
			if(heading)
			{
					oEar.style.top = (yn - 4) +'px';
			}
			else
			{
				oEar.style.top = k + b + document.documentElement.clientHeight * 0.15 - yn - 7 +'px';
			}
			//yn = parseInt(b * Math.sqrt(1 - (Math.pow(Math.abs(speed - h),2) / Math.pow(a,2) )  )  - 1) + k;

			

			//oEar.style.top = parseInt(y) + 'px';
			//oEar.style.top = parseInt(yn) +'px';

			//xn = parseInt(630);
			//y = y - Math.sqrt( Math.pow(262,2) * (1 - ( Math.pow(xn,2) / Math.pow(640,2) ) ) );
			//y=Math.sqrt(1-Math.pow(xn/a,2))*100;
			//alert(Math.sqrt(parseInt( b*(b*(1-(speed*speed)/(a*a) ) ) )));


			if(parseInt(oEar.style.left) > x1)
			{

				heading = false;
			}
			else if(parseInt(oEar.style.left) < x0)
			{
				heading = true;
			}
			//alert(parseint(oEar.style.top));
		}
		init();
		timer = setInterval(move,10);

		/*test*/

	}



	</script>


</head>
<body>
		

	<div id="Line"></div>
	<div id="earth"></div>

</body>
</html>